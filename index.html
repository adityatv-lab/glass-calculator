<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Glass iPhone Calculator</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@500;700&display=swap" rel="stylesheet">
  <style>
    body {
      font-family: 'Inter', sans-serif;
      -webkit-tap-highlight-color: transparent;
      overflow: hidden;
    }
    @keyframes gradient {
      0% { background-position: 0% 50%; }
      50% { background-position: 100% 50%; }
      100% { background-position: 0% 50%; }
    }
    body::before {
      content: '';
      position: fixed; inset: 0;
      background: linear-gradient(-45deg, #14141f, #1c1f27, #28283d, #1f1825, #33223a);
      background-size: 600% 600%;
      animation: gradient 20s ease infinite;
      z-index: -1;
    }
    .glass {
      background: rgba(20, 20, 28, 0.55);
      backdrop-filter: blur(16px) saturate(140%);
      -webkit-backdrop-filter: blur(16px) saturate(140%);
      border: 1px solid rgba(255, 255, 255, 0.08);
    }
    .btn {
      transition: all 0.15s ease;
      border-radius: 9999px; /* perfect circle */
      box-shadow: 0 4px 10px rgba(0,0,0,.4);
    }
    .btn:hover {
      filter: brightness(1.15);
      box-shadow: 0 6px 18px rgba(0,0,0,.6);
    }
    .btn:active {
      transform: scale(0.92);
      box-shadow: inset 0 3px 10px rgba(255,255,255,.1);
    }
    .display {
      font-feature-settings: "tnum";
      font-variant-numeric: tabular-nums;
      text-shadow: 0 0 12px rgba(0,0,0,.6);
    }
  </style>
</head>
<body class="flex items-center justify-center min-h-screen p-4">

  <div class="w-full max-w-xs sm:max-w-sm mx-auto glass rounded-3xl shadow-2xl p-5 border">
    <!-- Display -->
    <div class="mb-6 text-right p-5 rounded-2xl bg-black/40 backdrop-blur-md shadow-inner">
      <p id="history" class="text-white/60 text-lg h-7 overflow-hidden truncate">&nbsp;</p>
      <p id="display" class="display text-white text-5xl font-bold break-words">0</p>
    </div>

    <!-- Buttons -->
    <div class="grid grid-cols-4 gap-4">
      <!-- Row 1 -->
      <button onclick="percentage()" class="btn aspect-square bg-gray-500/70 text-white text-2xl">%</button>
      <button onclick="squareRoot()" class="btn aspect-square bg-gray-500/70 text-white text-2xl">√</button>
      <button onclick="clearEntry()" class="btn aspect-square bg-gray-500/70 text-white text-2xl">CE</button>
      <button onclick="clearDisplay()" class="btn aspect-square bg-red-500 text-white text-2xl">C</button>

      <!-- Row 2 -->
      <button onclick="appendNumber('7')" class="btn aspect-square bg-gray-800 text-white text-2xl">7</button>
      <button onclick="appendNumber('8')" class="btn aspect-square bg-gray-800 text-white text-2xl">8</button>
      <button onclick="appendNumber('9')" class="btn aspect-square bg-gray-800 text-white text-2xl">9</button>
      <button onclick="appendOperator('/')" class="btn aspect-square bg-orange-500 text-white text-3xl">÷</button>

      <!-- Row 3 -->
      <button onclick="appendNumber('4')" class="btn aspect-square bg-gray-800 text-white text-2xl">4</button>
      <button onclick="appendNumber('5')" class="btn aspect-square bg-gray-800 text-white text-2xl">5</button>
      <button onclick="appendNumber('6')" class="btn aspect-square bg-gray-800 text-white text-2xl">6</button>
      <button onclick="appendOperator('*')" class="btn aspect-square bg-orange-500 text-white text-3xl">×</button>

      <!-- Row 4 -->
      <button onclick="appendNumber('1')" class="btn aspect-square bg-gray-800 text-white text-2xl">1</button>
      <button onclick="appendNumber('2')" class="btn aspect-square bg-gray-800 text-white text-2xl">2</button>
      <button onclick="appendNumber('3')" class="btn aspect-square bg-gray-800 text-white text-2xl">3</button>
      <button onclick="appendOperator('-')" class="btn aspect-square bg-orange-500 text-white text-3xl">−</button>

      <!-- Row 5 -->
      <button onclick="appendNumber('0')" class="btn col-span-2 aspect-[2/1] bg-gray-800 text-white text-2xl">0</button>
      <button onclick="appendNumber('.')" class="btn aspect-square bg-gray-800 text-white text-2xl">.</button>
      <button onclick="calculate()" class="btn aspect-square bg-green-500 text-white text-3xl">=</button>
    </div>
  </div>

  <script>
    const display = document.getElementById('display');
    const historyDisplay = document.getElementById('history');
    let currentInput = '0';
    let operator = null;
    let previousInput = null;
    let shouldResetDisplay = false;

    function updateDisplay() {
      display.textContent = currentInput;
    }
    function clearDisplay() {
      currentInput = '0'; operator = null; previousInput = null;
      historyDisplay.textContent = '\u00A0'; updateDisplay();
    }
    function clearEntry() {
      if (!shouldResetDisplay) { currentInput = '0'; updateDisplay(); }
    }
    function appendNumber(n) {
      if (shouldResetDisplay) { currentInput = '0'; shouldResetDisplay = false; }
      if (currentInput === '0' && n !== '.') currentInput = n;
      else if (n === '.' && currentInput.includes('.')) return;
      else currentInput += n;
      updateDisplay();
    }
    function appendOperator(op) {
      if (operator && !shouldResetDisplay) calculate();
      operator = op; previousInput = currentInput; shouldResetDisplay = true;
      historyDisplay.textContent = `${currentInput} ${op}`;
    }
    function calculate() {
      if (!operator || !previousInput) return;
      const prev = parseFloat(previousInput), curr = parseFloat(currentInput);
      let result;
      switch (operator) {
        case '+': result = prev + curr; break;
        case '-': result = prev - curr; break;
        case '*': result = prev * curr; break;
        case '/': result = curr === 0 ? 'Error' : prev / curr; break;
      }
      historyDisplay.textContent = `${previousInput} ${operator} ${currentInput} =`;
      currentInput = result.toString(); operator = null; previousInput = null; shouldResetDisplay = true;
      updateDisplay();
    }
    function percentage() {
      currentInput = (parseFloat(currentInput) / 100).toString(); shouldResetDisplay = true; updateDisplay();
    }
    function squareRoot() {
      const n = parseFloat(currentInput);
      currentInput = n < 0 ? 'Error' : Math.sqrt(n).toString();
      shouldResetDisplay = true; updateDisplay();
    }
    document.addEventListener('keydown', e => {
      if (/\d/.test(e.key)) appendNumber(e.key);
      if (e.key === '.') appendNumber('.');
      if (['+', '-', '*', '/'].includes(e.key)) appendOperator(e.key);
      if (e.key === 'Enter' || e.key === '=') calculate();
      if (e.key === 'Escape') clearDisplay();
      if (e.key === 'Backspace') clearEntry();
    });
    updateDisplay();
  </script>
</body>
</html>
